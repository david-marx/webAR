<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ARnft example showing a video</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=0.5, maximum-scale=1"
    />
    <link rel="stylesheet" href="css/nft-style.css" />
  </head>
  <body>
    <form action="" class="ui marker">
      <h3>Please select an Image</h3>
      <fieldset>
        <select id="selImage">
					<option value="Data/DancingMan.mp4">Dancing Man</option>
          <option value="Data/openpose.mp4">Open Pose Dave</option>
        </select>
        <input type="button" value="change image" onclick="changeImage()" />
      </fieldset>
		</form>
		
		<form action="" class="ui audioButton">
      <h3>Activate Sound</h3>
      <fieldset>
        <input type="button" value="Activate Sound" onclick="activateSound()" />
      </fieldset>
		</form>
		
		<script type="text/javascript">
      function activateSound() {
				document.getElementById("arvideo").muted = false;
      } // end function
		</script>

    <script type="text/javascript">
      function changeImage() {
        var selImage = document.getElementById("selImage");
        var imagePath = selImage.value;
				document.getElementById("arvideo").src = imagePath;
				initializeAR();
      } // end function
		</script>
		
		<script type="text/javascript">
      function initializeAR() {
        ARnft.ARnft.init(
        1051,
				697,
				//"webAR/DataNFT/Visitenkarte_Webdemo_dancingman",
				changeNFT(document.getElementById("selImage").value),
        "config.json",
				true,
      )
        .then((nft) => {
          nft.addVideo("arvideo", 0.35, 1051, 697);
        })
        .catch((error) => {
          console.log(error);
        });
      }
    </script>

    <video
      loop
      autoplay
      muted
      webkit-playsinline
      playsinline
      crossorigin="anonymous"
      id="arvideo"
    >
      <source src="Data/DancingMan.mp4" type="video/mp4" />
    </video>

    <script src="js/third_party/three.js/three.min.js"></script>
		<script src="dist/ARnft.js"></script>
		


    <script>
			function changeNFT(imageSelection) {
				switch(imageSelection){
					case "Data/DancingMan.mp4":
						return "webAR/DataNFT/Visitenkarte_Webdemo_dancingman";
					case "Data/openpose.mp4":
						return "webAR/DataNFT/openpose_bw";
					default:
						return "webAR/DataNFT/Visitenkarte_Webdemo_dancingman";
				}
      } 
			initializeAR();
      
    </script>
  </body>
</html>
